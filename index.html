<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your Secure Key</title>
  <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.2.0/crypto-js.js"></script>
</head>
<body>
  <h1>Your Key</h1>
  <p id="key">Loading...</p>
  <p>Copy this key and paste it in your Roblox script.</p>

  <script>
    const jsonUrl = 'https://<USERNAME>.github.io/<REPO>/justarandomfiledontlookhereitdoesntmatterthatmuch.json';

    const secret = "SuperSecretPassphrase123!"; // << SAME as in Node

    fetch(jsonUrl)
      .then(res => res.json())
      .then(data => {
        const encrypted = data.encrypted;
        const ivBase64 = data.iv;
        const created = new Date(data.created_at);
        const now = new Date();
        const ageHours = (now - created) / (1000 * 60 * 60);

        if (ageHours > 24) {
          document.getElementById("key").innerText = "Key expired. Please refresh.";
          return;
        }

        // Decrypt
        const key = CryptoJS.SHA256(secret);
        const iv = CryptoJS.enc.Base64.parse(ivBase64);
        const decrypted = CryptoJS.AES.decrypt(encrypted, key, {
          iv: iv,
          mode: CryptoJS.mode.CBC,
          padding: CryptoJS.pad.Pkcs7
        });

        const plaintext = decrypted.toString(CryptoJS.enc.Utf8);
        document.getElementById("key").innerText = plaintext;
      })
      .catch(err => {
        document.getElementById("key").innerText = "Error loading key.";
        console.error(err);
      });
  </script>
</body>
</html>
